<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ROMIÂ® EducaciÃ³n â€“ Copilot Inteligente de Permanencia Escolar</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:'Segoe UI',sans-serif;background:#eef3fb;margin:0;}
header{background:#073b94;color:white;padding:18px;font-size:22px;font-weight:600;}
.container{max-width:1200px;margin:auto;padding:24px;}

.selector-box{background:white;padding:20px;border-radius:12px;display:flex;gap:20px;align-items:center;
box-shadow:0 4px 12px rgba(0,0,0,.12);margin-bottom:20px;border-left:5px solid #073b94;}
select,input,textarea{padding:10px;border-radius:8px;border:1px solid #ccc;width:100%;font-size:14px;}
.student-card{display:grid;grid-template-columns:160px 1fr;gap:20px;background:white;padding:25px;
border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.12);margin-bottom:20px;border-left:5px solid #2481ff;}
.avatar{width:130px;height:130px;border-radius:50%;background:#d0e3ff;display:flex;justify-content:center;
align-items:center;font-size:48px;font-weight:bold;color:#073b94;}

.grid-3{display:grid;gap:20px;grid-template-columns:repeat(3,1fr);margin-top:16px;}
.card{background:white;padding:20px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.12)}

.risk-bar{background:#ddd;height:12px;border-radius:5px;margin:8px 0;}
.risk-fill{background:#ff4b4b;height:100%;width:0%;border-radius:5px;transition:.8s;}

button{padding:11px 14px;border:none;border-radius:7px;cursor:pointer;background:#006CFF;color:white;
font-size:14px;margin-top:8px;display:flex;align-items:center;gap:8px;font-weight:600;}
button:hover{opacity:.85}
.action-btns button{width:100%;margin-bottom:6px;}
.green{background:#0AA14F}.yellow{background:#FFC107;color:#000}.red{background:#D7263D}

/* IA ANALYSIS */
#romiThinking{display:none;background:#e8f1ff;padding:12px;border-radius:10px;margin-top:10px;border-left:5px solid #2d7dff;font-style:italic;}
.loading-dots span{opacity:0;animation:blink 1.5s infinite;}
.loading-dots span:nth-child(1){animation-delay:0s;}
.loading-dots span:nth-child(2){animation-delay:.3s;}
.loading-dots span:nth-child(3){animation-delay:.6s;}
@keyframes blink{0%,20%{opacity:0;}50%{opacity:1;}100%{opacity:0;}}

/* Modal */
.modal-bg{display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.5);
justify-content:center;align-items:center;z-index:100;}
.modal{background:white;padding:25px;border-radius:12px;max-width:450px;width:90%;box-shadow:0 4px 12px rgba(0,0,0,.2);}
.modal input,.modal select{margin-top:5px;margin-bottom:10px;}

/* Sparkline */
.sparkline{height:40px;width:100%;display:flex;gap:2px;align-items:flex-end;margin-top:10px;}
.sparkbar{width:16px;background:#4c8eff;border-radius:3px;animation:grow 1s forwards;}
@keyframes grow{from{height:0;}}

/* Footer */
footer{text-align:center;padding:18px;font-size:14px;color:#555;background:white;margin-top:40px;}
footer a{color:#073b94;font-weight:bold;text-decoration:none;}

.section-title {margin-top:15px;font-size:15px;font-weight:bold;color:#0d2d6d;border-left:4px solid #2d7dff;padding-left:8px;}
</style>
</head>

<body>
<header>ROMIÂ® EducaciÃ³n â€” Copilot Inteligente de Permanencia Escolar</header>

<div class="container">

<div class="selector-box">
<strong>Estudiante:</strong>
<select id="studentSelect" onchange="loadStudent()">
<option value="">-- Seleccionar --</option>
<option value="juan">Juan PÃ©rez</option>
<option value="maria">MarÃ­a LÃ³pez</option>
<option value="carlos">Carlos HernÃ¡ndez</option>
</select>
</div>

<div id="panel" style="display:none;">

<div class="student-card">
<div class="avatar" id="avatar">ğŸ‘¤</div>
<div>

<label>Nombre</label><input id="name">

<label>Promedio</label><input id="prom" type="number" step="0.1" min="0" max="10">

<label>Zona</label>
<select id="zona">
<option>Urbana</option>
<option>Rural</option>
<option>Zona Vulnerable</option>
<option>Comunidad IndÃ­gena</option>
</select>

<label>Observaciones generales</label>
<textarea id="obs"></textarea>

<!-- NUEVOS CAMPOS SOCIALES MÃ‰XICO -->
<div class="section-title">Contexto socioeconÃ³mico</div>

<label>Â¿El estudiante trabaja?</label>
<select id="trabajo">
<option>No</option>
<option>SÃ­, medio tiempo</option>
<option>SÃ­, tiempo completo</option>
</select>

<label>Horas de trabajo a la semana</label>
<input id="horasTrabajo" type="number" min="0" max="80">

<label>Responsabilidades familiares (cuidado)</label>
<select id="cuida">
<option>No</option><option>SÃ­, ocasionalmente</option><option>SÃ­, regularmente</option>
</select>

<div class="section-title">Acceso y transporte</div>

<label>Medio de transporte</label>
<select id="transporte">
<option>Caminando</option><option>Bicicleta</option><option>Transporte pÃºblico</option><option>VehÃ­culo familiar</option><option>Otro</option>
</select>

<label>Tiempo de traslado (min)</label>
<input id="traslado" type="number">

<label>Acceso a internet</label>
<select id="internet"><option>SÃ­</option><option>No</option><option>Intermitente</option></select>

<label>Acceso a dispositivo</label>
<select id="dispositivo">
<option>Computadora personal</option>
<option>Computadora compartida</option>
<option>Solo celular</option>
<option>No tiene acceso</option>
</select>

<div class="section-title">Bienestar y seguridad</div>

<label>Apoyo familiar percibido</label>
<select id="apoyoFamiliar"><option>Alto</option><option>Medio</option><option>Bajo</option><option>Nulo</option></select>

<label>Estado emocional reportado</label>
<select id="emocional">
<option>Estable</option>
<option>EstrÃ©s / ansiedad</option>
<option>Tristeza / desmotivaciÃ³n</option>
<option>Requiere apoyo emocional</option>
</select>

<label>Experiencias de bullying o violencia</label>
<select id="bullying">
<option>No</option><option>VÃ­ctima</option><option>Testigo</option><option>Mixto</option>
</select>

<label>CondiciÃ³n de salud / discapacidad</label>
<select id="salud">
<option>Ninguna</option>
<option>CondiciÃ³n mÃ©dica crÃ³nica</option>
<option>Discapacidad fÃ­sica</option>
<option>Discapacidad sensorial</option>
<option>Otra</option>
</select>

<button onclick="save()">ğŸ’¾ Guardar datos</button>

</div>
</div>

<div class="grid-3">

<div class="card">
<h3>Riesgo de abandono ğŸ“Š</h3>
<div class="risk-bar"><div class="risk-fill" id="riskBar"></div></div>
<p id="riskTxt"><b>--%</b></p>
<button onclick="predict()">ğŸ” Analizar con IA</button>
<div id="romiThinking">ROMI estÃ¡ analizando <span class="loading-dots"><span>.</span><span>.</span><span>.</span></span></div>
<div id="iaSug" style="font-size:13px;margin-top:10px;color:#073b94;font-weight:600;"></div>
<button onclick="romiInsight()">ğŸ§  Insight profesional</button>
<button onclick="audioDemo()">ğŸ”Š Escuchar anÃ¡lisis</button>
</div>

<div class="card">
<h3>Acciones ğŸ«‚</h3>
<div class="action-btns">
<button class="green" onclick="openModal('tutor')">ğŸ¤ TutorÃ­a</button>
<button class="yellow" onclick="openModal('familia')">â˜ï¸ Contacto familia</button>
<button class="red" onclick="openModal('social')">ğŸ« Trabajo social</button>
<button onclick="openModal('beca')">ğŸ“ Becas</button>
<button onclick="openModal('calendar')">ğŸ“… Agenda</button>
</div>
</div>

<div class="card">
<h3>Trayectoria acadÃ©mica ğŸ“ˆ</h3>
<div class="sparkline">
<div class="sparkbar" style="height:40px"></div>
<div class="sparkbar" style="height:22px"></div>
<div class="sparkbar" style="height:30px"></div>
<div class="sparkbar" style="height:15px"></div>
<div class="sparkbar" style="height:34px"></div>
</div>
</div>

</div>
</div>

<div class="modal-bg" id="modal-bg">
<div class="modal" id="modalContent"></div>
</div>

<footer>
ROMIÂ® â€” Inteligencia MÃ©dica & Educativa<br>
<a href="https://romiai.com.mx/" target="_blank">https://romiai.com.mx/</a>
</footer>

<script>
const data={
juan:{n:"Juan PÃ©rez",p:7.2,z:"Urbana",o:"Faltas frecuentes"},
maria:{n:"MarÃ­a LÃ³pez",p:9.1,z:"Urbana",o:"Sin incidencias"},
carlos:{n:"Carlos HernÃ¡ndez",p:6.0,z:"Rural",o:"Apoyo emocional recomendado"}
};

let cita={fecha:null,hora:null};

function loadStudent(){
const id=studentSelect.value;if(!id){panel.style.display="none";return;}
const s=data[id];
panel.style.display="block";
name.value=s.n;prom.value=s.p;zona.value=s.z;obs.value=s.o;
avatar.textContent=s.n[0];
}

function save(){alert("âœ… Datos guardados (demo)");}

function predict(){
let r=100-(parseFloat(prom.value)*10);

if(zona.value!="Urbana")r+=10;
if(obs.value.toLowerCase().includes("falta"))r+=8;
if(emocional.value!=="Estable")r+=12;
if(trabajo.value!=="No")r+=8;
if(Number(horasTrabajo.value)>20)r+=10;
if(cuida.value!=="No")r+=8;
if(apoyoFamiliar.value==="Bajo"||apoyoFamiliar.value==="Nulo")r+=12;
if(bullying.value!=="No")r+=10;
if(internet.value!=="SÃ­")r+=6;

r=Math.min(100,Math.max(0,r));

riskBar.style.width=r+"%";
riskTxt.innerHTML=`<b>${r.toFixed(0)}%</b>`;

document.getElementById("romiThinking").style.display="block";
setTimeout(()=>document.getElementById("romiThinking").style.display="none",2000);

iaSug.innerHTML =
r>70 ? "El anÃ¡lisis sugiere factores acadÃ©micos y socioemocionales relevantes. Se recomienda acompaÃ±amiento integral y comunicaciÃ³n continua." :
r>40 ? "Se observa un riesgo moderado. PodrÃ­a fortalecer rutinas, apoyo acadÃ©mico y espacios de escucha." :
"Se identifican condiciones favorables. Continuar promoviendo motivaciÃ³n, liderazgo y pertenencia.";
}

function romiInsight(){
iaSug.innerHTML = `
ğŸ“Œ <b>Consideraciones profesionales sugeridas:</b><br><br>
â€¢ Fortalecer vÃ­nculo escuelaâ€“familia<br>
â€¢ Seguimiento emocional y habilidades socioemocionales<br>
â€¢ Reforzar hÃ¡bitos de estudio y acompaÃ±amiento acadÃ©mico<br>
â€¢ Recordatorio de acceso a becas y programas de apoyo<br><br>
<i>Este anÃ¡lisis busca orientar decisiones educativas, no sustituir criterio docente.</i>
`;
}

function audioDemo(){
alert("ğŸ”Š [SimulaciÃ³n] ROMI narrarÃ­a el anÃ¡lisis.");
}

function openModal(type){
let html="";
if(type==="tutor") html="âœ… TutorÃ­a registrada.";
if(type==="familia") html="ğŸ“ Contacto con familia registrado.";
if(type==="social") html="ğŸ« Caso enviado a trabajo social.";
if(type==="beca") html=`ğŸ“ Becas disponibles:<br>â€¢ Benito JuÃ¡rez<br>â€¢ Transporte escolar<br>â€¢ AlimentaciÃ³n escolar<br>â€¢ Apoyo psicolÃ³gico<br>â€¢ Alto rendimiento`;
if(type==="calendar"){
html=`
<h3>ğŸ“… Agendar cita</h3>
<label>Fecha</label><input type="date" id="fechaInput">
<label>Hora</label><input type="time" id="horaInput">
<button onclick="guardarCita()">âœ… Guardar</button>`;
if(cita.fecha){
html+=`<hr><p><b>Cita:</b> ${cita.fecha} â€” ${cita.hora}</p>
<button onclick="editarCita()">âœï¸ Reagendar</button>
<button onclick="cancelarCita()">âŒ Cancelar</button>`;
}
}
modalContent.innerHTML=html+`<br><button onclick="closeModal()">Cerrar</button>`;
document.getElementById("modal-bg").style.display="flex";
}

function closeModal(){document.getElementById("modal-bg").style.display="none";}
function guardarCita(){cita.fecha=document.getElementById("fechaInput").value;cita.hora=document.getElementById("horaInput").value;alert("âœ… Cita programada");closeModal();}
function editarCita(){openModal('calendar');}
function cancelarCita(){cita={fecha:null,hora:null};alert("ğŸ—‘ï¸ Cita cancelada");closeModal();}
</script>
</body>
</html>
